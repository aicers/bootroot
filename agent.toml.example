# Bootroot Agent Configuration Example
# Rename this file to agent.toml to use it.

# Support email address for ACME registration
email = "admin@example.com"

# Domains to request certificate for
domains = ["bootroot-agent"]

# ACME Directory URL
# Default: https://localhost:9000/acme/acme/directory (Step CA)
server = "https://localhost:9000/acme/acme/directory"

[paths]
# Path to save the certificate
cert = "certs/cert.pem"
# Path to save the private key
key = "certs/key.pem"

# Daemon mode settings (auto-renewal)
[daemon]
# How often to check certificate validity
check_interval = "1h"
# Start renewal 30 days (720h) before expiry
renew_before = "720h"
# Randomize check interval by +/- jitter (0s disables)
check_jitter = "0s"

# ACME behavior settings
[acme]
# HTTP-01 challenge listen port
http_challenge_port = 80
# Directory fetch retries and backoff (seconds)
directory_fetch_attempts = 10
directory_fetch_base_delay_secs = 1
directory_fetch_max_delay_secs = 10
# Order polling behavior
poll_attempts = 15
poll_interval_secs = 2

# Retry settings for issuance attempts
[retry]
backoff_secs = [5, 10, 30]

# Post-renewal hooks
[hooks.post_renew]
# Commands to run after a successful renewal
# success = [
#   {
#     command = "nginx"
#     args = ["-s", "reload"]
#     timeout_secs = 30
#     retry_backoff_secs = [5, 10, 30]
#     on_failure = "continue"
#   }
# ]
# Commands to run after a failed renewal
# failure = [
#   {
#     command = "logger"
#     args = ["bootroot renewal failed"]
#     timeout_secs = 30
#     on_failure = "stop"
#   }
# ]

# Optional External Account Binding (EAB) Credentials
# [eab]
# kid = "your-key-id"
# hmac = "your-hmac-key"
